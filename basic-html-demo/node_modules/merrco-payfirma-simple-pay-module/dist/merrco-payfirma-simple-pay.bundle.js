!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PayfirmaIframeTransaction=t():e.PayfirmaIframeTransaction=t()}(self,(()=>{return e={10:e=>{class t{static scriptLoadedPromises={};fields=this.defaultFields();constructor(e,r,i={}){this.apiKey=e,this.containerDiv=r,this.environment=i.environment||"TEST",this.style=i.style||this.defaultStyles(),t.scriptLoadedPromises[this.environment]||(t.scriptLoadedPromises[this.environment]=this.loadIframeScriptForEnvironment(this.environment)),this.initForm(r)}loadIframeScriptForEnvironment(e){return new Promise(((t,r)=>{let i;switch(e){case"production":i="https://iframe.payfirma.com/payhq-js/payhq-iframe-lib-test.min.js";break;case"test":default:i="https://test-iframe.payfirma.com/payhq-js/payhq-iframe-lib-test.min.js";break;case"sandbox":i="https://sandbox-iframe.payfirma.com/payhq-js/payhq-iframe-lib-test.min.js"}const n=document.createElement("script");n.setAttribute("src",i),n.onload=()=>t(),n.onerror=()=>r(new Error("Failed to load the external script for environment: "+e)),document.head.appendChild(n)}))}async initForm(e){const r=document.getElementById(e);if(!r)throw new Error("Container element not found.");r.innerHTML=this.renderCardFields();try{await t.scriptLoadedPromises[this.environment];const e={fields:this.fields,style:{input:this.style.input}};this.payfirmaObject=Payfirma.payfirmaInit(this.environment,this.apiKey,e),this.payfirmaObject.NumberField().render(e.fields.cardNumber.selector),this.payfirmaObject.ExpiryField().render(e.fields.cardExpiry.selector),this.payfirmaObject.CVVField().render(e.fields.cardCvv.selector)}catch(e){console.error("There was an error:",e)}}getPaymentToken(){return this.payfirmaObject.tokenize().then((e=>e)).catch((e=>Promise.reject(e)))}renderCardFields(){return this.generateStyleString(this.style.input),`\n      <div \n          id="${this.fields.cardNumber.selector.slice(1)}" \n          style="${this.generateStyleString(this.style.input)}">\n      </div>\n\n      <div \n          id="${this.fields.cardExpiry.selector.slice(1)}" \n          style="${this.generateStyleString(this.style.input)}">\n      </div>\n\n      <div \n          id="${this.fields.cardCvv.selector.slice(1)}" \n          style="${this.generateStyleString(this.style.input)}">\n      </div>`}defaultFields(){return{cardNumber:{selector:"#defaultCardNumber_container",placeholder:"Card Number"},cardExpiry:{selector:"#defaultCardExpiry_container",placeholder:"Expires (MM/YY)"},cardCvv:{selector:"#defaultCardCvv_container",placeholder:"CVV"}}}defaultStyles(){return{input:{border:"1px solid #E5E9EC","margin-bottom":"10px"}}}generateStyleString(e){const t={height:"40px",...e};return Object.entries(t).map((([e,t])=>`${e}: ${t}`)).join("; ")}}e.exports=t}},t={},function r(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,r),s.exports}(10);var e,t}));